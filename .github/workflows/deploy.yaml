name: Google App Engine Deploy
on:
    pull_request:
        branches: [master]
    push:
        branches: [master]

jobs:
    deploy_app:
        runs-on: ubuntu-latest
        steps:
            - id: 'auth'
              uses: 'google-github-actions/auth@v0'
              with:
                  credentials_json: '${{ secrets.GOOGLE_SERVICE_ACC_KEY }}'

            - id: 'deploy'
              uses: 'google-github-actions/deploy-appengine@v0'
              with:
                  deliverables: '../../app.yaml'
